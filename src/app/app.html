<app-header></app-header>

<main>
  <!-- Hero Section -->
  <app-hero></app-hero>

  <!-- Search Bar -->
  <section class="bg-white border-b border-gray-lightest sticky top-[55px] z-40">
    <div class="max-w-[1860px] mx-auto px-6 h-[92px] flex items-center justify-between">
      <button class="flex items-center gap-2 px-6 py-2.5 rounded-full border border-gray-lightest hover:bg-gray-50 transition-colors">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
          <path d="M1.09795 3.35997C0.99982 3.38019 0.907583 3.42248 0.82823 3.48364C0.748876 3.5448 0.684488 3.62323 0.639947 3.71297C0.604062 3.79624 0.58572 3.88601 0.586064 3.97668C0.586408 4.06735 0.605431 4.15698 0.641947 4.23997C0.684153 4.33625 0.750525 4.41999 0.834625 4.48307C0.918726 4.54614 1.0177 4.58641 1.12195 4.59997C1.30195 4.62797 18.6999 4.62797 18.8799 4.59897C18.9834 4.58427 19.0815 4.54365 19.1651 4.48089C19.2486 4.41812 19.315 4.33525 19.3579 4.23997C19.3998 4.1565 19.4175 4.06297 19.4089 3.96997C19.4089 3.83597 19.3999 3.79297 19.3549 3.70597C19.2863 3.57269 19.1756 3.46581 19.0399 3.40197L18.9299 3.34997L10.0599 3.34697C5.18095 3.34597 1.14895 3.35197 1.09795 3.35997ZM2.90995 7.38797C2.82504 7.41311 2.74627 7.4556 2.67862 7.51274C2.61097 7.56989 2.55592 7.64045 2.51695 7.71997C2.45095 7.84697 2.44895 8.14997 2.51395 8.27097C2.58666 8.39384 2.69094 8.495 2.81595 8.56397L2.90995 8.60997H17.0899L17.1849 8.56397C17.2976 8.51038 17.3914 8.42407 17.4542 8.31631C17.517 8.20856 17.5458 8.08437 17.5369 7.95997C17.533 7.84426 17.4967 7.73197 17.4322 7.63583C17.3677 7.53968 17.2775 7.46352 17.1719 7.41597L17.0699 7.36997L10.0299 7.36597C4.39195 7.36297 2.97395 7.36797 2.90995 7.38797ZM4.73395 11.42C4.60784 11.466 4.5008 11.5529 4.42995 11.667C4.38041 11.7424 4.3479 11.8278 4.33466 11.917C4.32142 12.0063 4.32777 12.0974 4.35327 12.184C4.37876 12.2706 4.4228 12.3506 4.48233 12.4185C4.54185 12.4863 4.61542 12.5404 4.69795 12.577L4.80995 12.63H15.1899L15.3019 12.578C15.3845 12.5413 15.4581 12.4871 15.5176 12.4192C15.5771 12.3512 15.6212 12.2711 15.6467 12.1845C15.6722 12.0978 15.6785 12.0066 15.6653 11.9173C15.652 11.8279 15.6195 11.7425 15.5699 11.667C15.4977 11.5515 15.3884 11.4641 15.2599 11.419C15.1619 11.381 15.0469 11.38 9.99495 11.381C4.98995 11.382 4.82695 11.383 4.73395 11.42ZM7.33895 15.4C7.25633 15.4135 7.17723 15.4433 7.10628 15.4878C7.03533 15.5322 6.97395 15.5903 6.92572 15.6588C6.87749 15.7272 6.84339 15.8046 6.8254 15.8863C6.80741 15.9681 6.80589 16.0526 6.82095 16.135C6.84995 16.277 6.88095 16.339 6.97395 16.442C7.07095 16.549 7.18495 16.612 7.32895 16.639C7.49595 16.669 12.5069 16.669 12.6709 16.639C12.7888 16.6243 12.8984 16.5704 12.9819 16.486C13.1479 16.336 13.2219 16.116 13.1789 15.906C13.1605 15.8047 13.1171 15.7096 13.0526 15.6293C12.9882 15.549 12.9048 15.486 12.8099 15.446L12.6899 15.39L10.0599 15.387C8.61295 15.386 7.38895 15.391 7.33895 15.4Z" fill="#707070"/>
        </svg>
        <span class="text-dark text-[15px]">Filtrar</span>
      </button>

      <div class="flex-1 max-w-3xl mx-8">
        <div class="relative">
          <div class="absolute left-4 top-1/2 -translate-y-1/2">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
              <path d="M8.51707 14.9268C7.72683 14.9268 6.84878 14.7512 6.05854 14.4878C4.47805 13.8732 3.16098 12.6439 2.54634 11.0634C1.14146 7.81465 2.72195 3.95124 5.97073 2.54636C7.55122 1.84392 9.30732 1.84392 10.8878 2.54636C12.4683 3.16099 13.6976 4.39026 14.4 5.97075C15.1024 7.55124 15.1024 9.30734 14.4 10.8878C13.7854 12.4683 12.5561 13.6976 10.9756 14.4C10.1854 14.7512 9.30732 14.9268 8.42927 14.9268H8.51707ZM6.32195 3.42441C3.5122 4.56587 2.28293 7.81465 3.42439 10.6244C4.03903 11.9415 5.09268 12.9951 6.40976 13.522C7.72683 14.0488 9.21951 14.0488 10.6244 13.522C11.9415 12.9073 12.9951 11.8537 13.522 10.5366C14.0488 9.21953 14.0488 7.72685 13.522 6.32197C12.9951 4.91709 11.8537 3.95124 10.5366 3.42441C9.21951 2.89758 7.72683 2.89758 6.32195 3.42441Z" fill="#707070"/>
              <path d="M17.2976 17.8244C17.2098 17.8244 17.0342 17.8244 16.9463 17.6488L12.2927 12.9952C12.1171 12.8195 12.1171 12.4683 12.2927 12.2927C12.4683 12.1171 12.8195 12.1171 12.9951 12.2927L17.6488 16.9464C17.8244 17.122 17.8244 17.4732 17.6488 17.6488C17.561 17.7366 17.3854 17.8244 17.2976 17.8244Z" fill="#707070"/>
            </svg>
          </div>
          <input type="text" 
                 [(ngModel)]="searchTerm"
                 (keyup.enter)="onSearch()"
                 placeholder="Pesquisar mÃºsicos..." 
                 class="w-full h-11 pl-14 pr-4 bg-gray-bg/60 rounded-full border border-gray-lightest focus:outline-none focus:border-secondary transition-colors text-gray placeholder:text-gray" />
        </div>
      </div>

      <div class="flex items-center gap-6">
        <div class="flex items-center gap-0.5">
          <button class="px-4 py-2 text-dark text-sm rounded-full border border-gray-lightest bg-white hover:bg-gray-50 transition-colors">
            Projetos
          </button>
          <button class="px-4 py-2 text-gray text-sm rounded-full hover:bg-gray-50 transition-colors">
            Pessoas
          </button>
        </div>
        <button class="flex items-center gap-2 hover:opacity-80 transition-opacity" (click)="onSortChange('-createdAt')">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M1.09795 3.35997C0.99982 3.38019 0.907583 3.42248 0.82823 3.48364C0.748876 3.5448 0.684488 3.62323 0.639947 3.71297C0.604062 3.79624 0.58572 3.88601 0.586064 3.97668C0.586408 4.06735 0.605431 4.15698 0.641947 4.23997C0.684153 4.33625 0.750525 4.41999 0.834625 4.48307C0.918726 4.54614 1.0177 4.58641 1.12195 4.59997C1.30195 4.62797 18.6999 4.62797 18.8799 4.59897C18.9834 4.58427 19.0815 4.54365 19.1651 4.48089C19.2486 4.41812 19.315 4.33525 19.3579 4.23997C19.3998 4.1565 19.4175 4.06297 19.4089 3.96997C19.4089 3.83597 19.3999 3.79297 19.3549 3.70597C19.2863 3.57269 19.1756 3.46581 19.0399 3.40197L18.9299 3.34997L10.0599 3.34697C5.18095 3.34597 1.14895 3.35197 1.09795 3.35997Z" fill="#707070"/>
          </svg>
          <span class="text-dark text-sm">Recente</span>
          <svg width="10" height="5" viewBox="0 0 10 5" fill="none">
            <path d="M5.78905 3.52041L9.00916 0.741028H2.56894L5.78905 3.52041Z" fill="#707070"/>
          </svg>
        </button>
      </div>
    </div>
  </section>

  <!-- Projects Grid -->
  <section class="bg-white py-12 relative">
    <div class="max-w-[1860px] mx-auto px-6">
      @if (isLoading) {
        <div class="text-center py-20">
          <p class="text-gray-600">Carregando projetos...</p>
        </div>
      } @else if (projects.length === 0) {
        <div class="text-center py-20">
          <p class="text-gray-600">Nenhum projeto encontrado.</p>
        </div>
      } @else {
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">
          @for (project of projects; track project._id) {
            <app-project-card [project]="project"></app-project-card>
          }
        </div>
      }
    </div>

    <!-- Gradient fade overlay -->
    <div class="absolute bottom-0 left-0 right-0 h-52 bg-gradient-fade pointer-events-none"></div>
  </section>

  <!-- Login Section - Only show if not authenticated -->
  @if (!isAuthenticated) {
    <app-login-section></app-login-section>
  }
</main>

<app-footer></app-footer>
